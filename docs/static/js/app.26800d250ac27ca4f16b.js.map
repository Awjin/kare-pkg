{"version":3,"sources":["webpack:///./src/App.vue?2e4f","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///src/components/Editor.vue","webpack:///./src/components/Editor.vue?4b32","webpack:///./src/components/Editor.vue","webpack:///src/components/Preview.vue","webpack:///./src/components/Preview.vue?77b4","webpack:///./src/components/Preview.vue","webpack:///./src/components/SiteHeader.vue?14e5","webpack:///./src/components/SiteHeader.vue","webpack:///src/components/SiteHeader.vue","webpack:///src/components/DrawingBoard.vue","webpack:///./src/components/DrawingBoard.vue?8cb2","webpack:///./src/components/DrawingBoard.vue","webpack:///src/components/Home.vue","webpack:///./src/components/Home.vue?e5c5","webpack:///./src/components/Home.vue","webpack:///./src/router/index.js","webpack:///./src/store/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","name","mode","key","Math","random","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","Editor","props","data","pixels","$store","state","drawings","drawingIdx","isDrawing","isFilling","methods","trackStart","_ref","idx","target","dataset","pixelIdx","undefined","commit","toggleFill","value","trackMove","event","getTarget","type","currTouch","changedTouches","document","elementFromPoint","clientX","clientY","trackEnd","created","window","addEventListener","destroyed","removeEventListener","components_Editor","_vm","staticClass","on","mousedown","$event","preventDefault","touchstart","mouseover","touchmove","_l","i","class","filled","data-pixel-idx","src_components_Editor","Editor_normalizeComponent","Preview","canvas","resolution","propResolution","scale","propScale","computed","canvasSize","imgSrc","drawPixelsToCanvas","updateImgSrc","initCanvas","createElement","height","width","context","getContext","fillStyle","fillRect","col","row","floor","toDataURL","remove","components_Preview","src","src_components_Preview","Preview_normalizeComponent","components_SiteHeader","to","id","title","click","blurParent","xmlns","viewBox","d","_v","fill","_t","src_components_SiteHeader","SiteHeader_normalizeComponent","parentElement","blur","DrawingBoard","components","SiteHeader","isNotUndoable","history","currIdx","isNotRedoable","actions","length","isNotClearable","clearDrawing","undoDrawing","_ref2","redoDrawing","_ref3","saveDrawing","_ref4","deleteDrawing","_ref5","confirm","$router","push","keyboardShortcut","_this","ctrlKey","metaKey","shiftKey","keyCode","components_DrawingBoard","disabled","href","download","Date","now","src_components_DrawingBoard","DrawingBoard_normalizeComponent","isNotExportable","exportSrc","jsonExport","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","get_iterator_default","next","done","drawing","err","return","str","stringify_default","encodeURIComponent","getRoute","newDrawing","importFile","files","fileReader","FileReader","onload","importedPixels","JSON","parse","result","readAsText","reset","components_Home","for","accept","hidden","multiple","change","src_components_Home","Home_normalizeComponent","Home","vue_esm","use","vue_router_esm","router","routes","path","component","vuex_esm","store","Store","205","206","207","208","209","210","237","238","239","240","241","242","269","270","271","272","273","274","301","302","303","304","305","306","589","590","591","592","593","594","621","622","623","624","625","626","653","654","655","656","657","658","685","686","687","688","689","690","332","363","395","427","459","491","523","556","339","372","404","436","468","500","532","563","437","469","462","463","464","368","400","432","mutations","unshiftDrawings","importDrawings","filteredPixels","filter","keys","keys_default","forEach","isNaN","keyNumber","parseFloat","parseInt","validatePixels","startAction","newAction","updateDrawing","setPixel","recordToggledPixel","updateLocalStorage","replayAction","_ref6","_ref7","splice","_ref8","loadFromLocalStorage","localStorage","localDrawings","set","setItem","unshift","pruneCount","pixelsToToggle","currFill","config","productionTip","beforeEach","from","params","el","App","template"],"mappings":"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","file":"static/js/app.26800d250ac27ca4f16b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"fade\",\"mode\":\"out-in\"}},[_c('router-view',{key:Math.random()})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3cdc8d2c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3cdc8d2c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3cdc8d2c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <transition name=\"fade\" mode=\"out-in\">\n    <router-view :key=\"Math.random()\"/>\n  </transition>\n</template>\n\n<script>\n  export default {\n    name: 'App'\n  };\n</script>\n\n<style>\n  * {\n    box-sizing: border-box;\n    -webkit-tap-highlight-color: transparent;\n    user-select: none;\n  }\n\n  html {\n    background: black;\n    color: white;\n    font: 13px / 1.5 'Andale Mono', 'Lucida Console', monospace;\n  }\n\n  body > * {\n    min-height: 100vh;\n  }\n\n  a,\n  button {\n    outline: none;\n  }\n\n  .fade-enter,\n  .fade-leave-to {\n    opacity: 0;\n    transform: scale(.9);\n  }\n\n  .fade-enter-active {\n    transition: all 225ms cubic-bezier(0, 0, .2, 1);\n  }\n\n  .fade-leave-active {\n    transition: all 195ms cubic-bezier(.4, 0, 1, 1);\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<template>\n  <div\n    class=\"editor\"\n    @mousedown.prevent=\"trackStart\"\n    @touchstart.prevent=\"trackStart\"\n    @mouseover.prevent=\"trackMove\"\n    @touchmove.prevent=\"trackMove\"\n    >\n    <div class=\"edit-area\">\n      <div\n        v-for=\"i in 1024\"\n        class=\"pixel\"\n        :class=\"{filled: pixels[i - 1]}\"\n        :data-pixel-idx=\"i - 1\"\n        >\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'Editor',\n\n    props: [\n      'drawingIdx'\n    ],\n\n    data () {\n      return {\n        pixels: this.$store.state.drawings[this.drawingIdx].pixels,\n        isDrawing: false,\n        isFilling: false\n      }\n    },\n\n    methods: {\n      trackStart({target}) {\n        const idx = target.dataset.pixelIdx;\n        if (idx === undefined) return;\n\n        this.isDrawing = true;\n        this.isFilling = !this.pixels[idx];\n\n        this.$store.commit('startAction', {drawingIdx: this.drawingIdx});\n        this.toggleFill(idx);\n      },\n\n      toggleFill(pixelIdx) {\n        const shouldToggle = this.pixels[pixelIdx] != this.isFilling;\n        if (!shouldToggle) return;\n\n        this.$store.commit('updateDrawing', {\n          drawingIdx: this.drawingIdx,\n          pixelIdx: pixelIdx,\n          value: this.isFilling\n        });\n      },\n\n      trackMove(event) {\n        if (!this.isDrawing) return;\n\n        const target = this.getTarget(event);\n        this.toggleFill(target.dataset.pixelIdx);\n      },\n\n      getTarget(event) {\n        if (event.type === 'touchmove') {\n          const currTouch = event.changedTouches[0];\n          return document.elementFromPoint(\n            currTouch.clientX,\n            currTouch.clientY\n          );\n        } else {\n          return event.target;\n        }\n      },\n\n      trackEnd() {\n        this.isDrawing = false;\n      }\n    },\n\n    created() {\n      window.addEventListener('mouseup', this.trackEnd);\n      window.addEventListener('touchcancel', this.trackEnd);\n      window.addEventListener('touchend', this.trackEnd);\n    },\n\n    destroyed() {\n      window.removeEventListener('mouseup', this.trackEnd);\n      window.removeEventListener('touchcancel', this.trackEnd);\n      window.removeEventListener('touchend', this.trackEnd);\n    }\n  };\n</script>\n\n<style scoped>\n  .editor {\n    background: white;\n    padding: 1px;\n  }\n\n  .edit-area {\n    cursor: pointer;\n    display: grid;\n    grid-template-columns: repeat(32, 1fr);\n    grid-template-rows: repeat(32, 1fr);\n    height: 100%;\n    width: 100%;\n    border-right: 1px solid #bbb;\n    border-bottom: 1px solid #bbb;\n\n  }\n\n  .pixel {\n    background: white;\n    border-left: 1px solid #bbb;\n    border-top: 1px solid #bbb;\n  }\n\n  .pixel.filled {\n    background: black;\n    border-color: black;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Editor.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor\",on:{\"mousedown\":function($event){$event.preventDefault();return _vm.trackStart($event)},\"touchstart\":function($event){$event.preventDefault();return _vm.trackStart($event)},\"mouseover\":function($event){$event.preventDefault();return _vm.trackMove($event)},\"touchmove\":function($event){$event.preventDefault();return _vm.trackMove($event)}}},[_c('div',{staticClass:\"edit-area\"},_vm._l((1024),function(i){return _c('div',{staticClass:\"pixel\",class:{filled: _vm.pixels[i - 1]},attrs:{\"data-pixel-idx\":i - 1}})}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5a4925d6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Editor.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-5a4925d6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Editor.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Editor.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Editor.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5a4925d6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Editor.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-5a4925d6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Editor.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"preview\">\n     <img :src=\"imgSrc\">\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'Preview',\n\n    props: [\n      'drawingIdx',\n      'propResolution',\n      'propScale'\n    ],\n\n    data() {\n      return {\n        canvas: null,\n        resolution: this.propResolution || 32,\n        scale: this.propScale || 20,\n        pixels: this.$store.state.drawings[this.drawingIdx].pixels\n      }\n    },\n\n    computed: {\n      canvasSize() {\n        return this.resolution * this.scale;\n      },\n\n      imgSrc() {\n        this.drawPixelsToCanvas();\n        this.updateImgSrc();\n        return this.$store.state.drawings[this.drawingIdx].imgSrc;\n      }\n    },\n\n    methods: {\n      initCanvas() {\n        const canvas = document.createElement('canvas');\n        canvas.height = this.canvasSize;\n        canvas.width = this.canvasSize;\n\n        const context = canvas.getContext('2d');\n        context.fillStyle = 'white';\n        context.fillRect(0, 0, this.canvasSize, this.canvasSize);\n        context.fillStyle = 'black';\n\n        this.canvas = canvas;\n      },\n\n      drawPixelsToCanvas() {\n        const context = this.canvas.getContext('2d');\n\n        for (let pixelIdx in this.pixels) {\n          context.fillStyle = (this.pixels[pixelIdx]) ? 'black' : 'white';\n\n          const col = pixelIdx % this.resolution;\n          const row = Math.floor(pixelIdx / this.resolution);\n\n          context.fillRect(\n            col * this.scale,\n            row * this.scale,\n            this.scale,\n            this.scale\n          );\n        }\n      },\n\n      updateImgSrc() {\n        this.$store.commit('updateImgSrc', {\n          drawingIdx: this.drawingIdx,\n          imgSrc: this.canvas.toDataURL('image/png')\n        });\n      }\n    },\n\n    created() {\n      this.initCanvas();\n    },\n\n    destroyed() {\n      this.canvas.remove();\n    }\n  };\n</script>\n\n<style scoped>\n  .preview {\n    background: white;\n    border: 1px solid white;\n  }\n\n  img {\n    width: 100%;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Preview.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"preview\"},[_c('img',{attrs:{\"src\":_vm.imgSrc}})])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-37070098\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Preview.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-37070098\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Preview.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Preview.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Preview.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-37070098\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Preview.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-37070098\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Preview.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"site-header\"},[_c('router-link',{attrs:{\"to\":\"/\",\"id\":\"home\",\"title\":\"Home (cmd + /)\"}},[_c('span',{on:{\"click\":_vm.blurParent}},[_c('svg',{attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}},[_c('path',{attrs:{\"d\":\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\"}}),_vm._v(\" \"),_c('path',{attrs:{\"d\":\"M0 0h24v24H0z\",\"fill\":\"none\"}})]),_vm._v(\"\\n      kare.pkg\\n    \")])]),_vm._v(\" \"),_c('div',{staticClass:\"slotted\"},[_vm._t(\"default\")],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-23519db9\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/SiteHeader.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-23519db9\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SiteHeader.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SiteHeader.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./SiteHeader.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-23519db9\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./SiteHeader.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-23519db9\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/SiteHeader.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"site-header\">\n    <router-link\n      to=\"/\"\n      id=\"home\"\n      title=\"Home (cmd + /)\"\n      >\n      <span @click=\"blurParent\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n          <path d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\"/>\n          <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\n        </svg>\n        kare.pkg\n      </span>\n    </router-link>\n\n    <div class=\"slotted\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'SiteHeader',\n    methods: {\n      blurParent({target}) {\n        target.parentElement.blur();\n      }\n    }\n  };\n</script>\n\n<style scoped>\n  .site-header {\n    align-items: flex-start;\n    display: flex;\n    justify-content: space-between;\n    padding: 3vh 2vw;\n    width: 100%;\n  }\n\n  .slotted {\n    text-align: right;\n  }\n\n  a {\n    background: black;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    color: white;\n    cursor: pointer;\n    display: inline-block;\n    padding: .4rem .75rem .55rem .75rem;\n    text-decoration: none;\n    transition: border-color 100ms cubic-bezier(.4, 0, .2, 1),\n                color 100ms cubic-bezier(.4, 0, .2, 1);\n  }\n\n  a:active,\n  a:focus,\n  a:hover {\n    border-color: white;\n  }\n\n  a[disabled] {\n    color: #888;\n    cursor: default;\n  }\n\n  a:active[disabled],\n  a:focus[disabled],\n  a:hover[disabled] {\n    border-color: transparent;\n  }\n\n  #home {\n    border-color: white;\n    letter-spacing: .05rem;\n    margin-right: 1rem;\n    padding-left: .6rem;\n  }\n\n  #home span {\n    align-items: center;\n    display: flex;\n  }\n\n  #home svg {\n    fill: white;\n    padding-bottom: .1rem;\n    width: 1.5rem;\n    margin-right: .4rem;\n    transition-duration: 125ms;\n  }\n\n  #home:active,\n  #home:focus,\n  #home:hover {\n    border-color: #888;\n    color: #888;\n  }\n\n  #home:active svg,\n  #home:focus svg,\n  #home:hover svg {\n    fill: #888;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/SiteHeader.vue","<template>\n  <div class=\"drawingBoard\">\n    <site-header>\n      <div>\n        <a\n          @click=\"undoDrawing\"\n          :disabled=\"isNotUndoable\"\n          title=\"Undo stroke (cmd + z)\"\n          >\n          undo\n        </a>\n\n        <a\n          @click=\"redoDrawing\"\n          :disabled=\"isNotRedoable\"\n          title=\"Redo stroke (cmd + shift + z)\"\n          >\n          redo\n        </a>\n\n        <a\n          @click=\"clearDrawing\"\n          title=\"Clear pixels (cmd + x)\"\n          >\n          clear\n        </a>\n\n        <a\n          @click=\"saveDrawing\"\n          title=\"Download png (cmd + s)\"\n          :href=\"imgSrc\"\n          :download=\"`kare-pkg-${Date.now()}.png`\"\n          >\n          save\n        </a>\n\n        <a\n          @click=\"deleteDrawing\"\n          title=\"Delete drawing (cmd + delete)\"\n          >\n          delete\n        </a>\n      </div>\n    </site-header>\n\n    <main>\n      <preview :drawingIdx=\"drawingIdx\"></preview>\n\n      <editor :drawingIdx=\"drawingIdx\"></editor>\n    </main>\n  </div>\n</template>\n\n<script>\n  import Editor from './Editor.vue'\n  import Preview from './Preview.vue'\n  import SiteHeader from './SiteHeader.vue'\n\n  export default {\n    name: 'DrawingBoard',\n\n    components: {\n      Editor: Editor,\n      Preview: Preview,\n      SiteHeader: SiteHeader\n    },\n\n    props: [\n      'drawingIdx'\n    ],\n\n    computed: {\n      isNotUndoable() {\n        const history = this.$store.state.drawings[this.drawingIdx].history;\n        return (history.currIdx < 0);\n      },\n\n      isNotRedoable() {\n        const history = this.$store.state.drawings[this.drawingIdx].history;\n        return (history.currIdx >= history.actions.length - 1);\n      },\n\n      isNotClearable() {\n        const pixels = this.$store.state.drawings[this.drawingIdx].pixels;\n        for (let pixelIdx in pixels) {\n          if (pixels[pixelIdx]) return false;\n        }\n        return true;\n      },\n\n      imgSrc() {\n        return this.$store.state.drawings[this.drawingIdx].imgSrc;\n      }\n    },\n\n    methods: {\n      clearDrawing({target}) {\n        target.blur();\n        if (this.isNotClearable) return;\n        this.$store.commit('clearDrawing', {drawingIdx: this.drawingIdx});\n      },\n\n      undoDrawing({target}) {\n        target.blur();\n        this.$store.commit('undoDrawing', {drawingIdx: this.drawingIdx});\n      },\n\n      redoDrawing({target}) {\n        target.blur();\n        this.$store.commit('redoDrawing', {drawingIdx: this.drawingIdx});\n      },\n\n      saveDrawing({target}) {\n        target.blur();\n      },\n\n      deleteDrawing({target}) {\n        target.blur();\n        const result = window.confirm(`Are you sure? This can't be undone!`);\n        if (result) {\n          this.$store.commit('deleteDrawing', {drawingIdx: this.drawingIdx});\n          this.$router.push('/');\n        }\n      },\n\n      keyboardShortcut() {\n        const refreshShortcut = 82;\n        const homeShortcut = 191;\n        const redoShortcut = 90;\n        const undoShortcut = 90;\n        const clearShortcut = 88;\n        const saveShortcut = 83;\n        const deleteShortcut = 8;\n\n        return (event) => {\n          if (!event.ctrlKey && !event.metaKey) {\n            return;\n          }\n\n          if (event.shiftKey) {\n            if (event.keyCode === redoShortcut) {\n              event.preventDefault();\n              this.redoDrawing(event);\n            }\n            return;\n          }\n\n          switch(event.keyCode) {\n            case refreshShortcut:\n              // event.preventDefault();\n              break;\n            case homeShortcut:\n              event.preventDefault();\n              this.$router.push('/');\n              break;\n            case undoShortcut:\n              event.preventDefault();\n              this.undoDrawing(event);\n              break;\n            case clearShortcut:\n              event.preventDefault();\n              this.clearDrawing(event);\n              break;\n            case saveShortcut:\n              event.preventDefault();\n              this.saveDrawing(event);\n              break;\n            case deleteShortcut:\n              event.preventDefault();\n              this.deleteDrawing(event);\n              break;\n          }\n        }\n      }\n    },\n\n    created() {\n      window.addEventListener('keydown', this.keyboardShortcut());\n    },\n\n    destroyed() {\n      window.removeEventListener('keydown', this.keyboardShortcut());\n    }\n  };\n</script>\n\n<style scoped>\n  main {\n    display: flex;\n    justify-content: center;\n    padding: 1.5vmin 6vmin 6vmin 0;\n  }\n\n  main > * {\n    flex-shrink: 0;\n  }\n\n  .preview {\n    height: 17vmin;\n    margin-right: 3vmin;\n    width: 17vmin;\n  }\n\n  .editor {\n    height: 74vmin;\n    width: 74vmin;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/DrawingBoard.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"drawingBoard\"},[_c('site-header',[_c('div',[_c('a',{attrs:{\"disabled\":_vm.isNotUndoable,\"title\":\"Undo stroke (cmd + z)\"},on:{\"click\":_vm.undoDrawing}},[_vm._v(\"\\n        undo\\n      \")]),_vm._v(\" \"),_c('a',{attrs:{\"disabled\":_vm.isNotRedoable,\"title\":\"Redo stroke (cmd + shift + z)\"},on:{\"click\":_vm.redoDrawing}},[_vm._v(\"\\n        redo\\n      \")]),_vm._v(\" \"),_c('a',{attrs:{\"title\":\"Clear pixels (cmd + x)\"},on:{\"click\":_vm.clearDrawing}},[_vm._v(\"\\n        clear\\n      \")]),_vm._v(\" \"),_c('a',{attrs:{\"title\":\"Download png (cmd + s)\",\"href\":_vm.imgSrc,\"download\":(\"kare-pkg-\" + (Date.now()) + \".png\")},on:{\"click\":_vm.saveDrawing}},[_vm._v(\"\\n        save\\n      \")]),_vm._v(\" \"),_c('a',{attrs:{\"title\":\"Delete drawing (cmd + delete)\"},on:{\"click\":_vm.deleteDrawing}},[_vm._v(\"\\n        delete\\n      \")])])]),_vm._v(\" \"),_c('main',[_c('preview',{attrs:{\"drawingIdx\":_vm.drawingIdx}}),_vm._v(\" \"),_c('editor',{attrs:{\"drawingIdx\":_vm.drawingIdx}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-58a9866c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/DrawingBoard.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-58a9866c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./DrawingBoard.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DrawingBoard.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DrawingBoard.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-58a9866c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./DrawingBoard.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-58a9866c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/DrawingBoard.vue\n// module id = null\n// module chunks = ","<template>\n  <div class=\"home\">\n    <site-header>\n      <div>\n        <a\n          title=\"Export backup (cmd + s)\"\n          :href=\"exportSrc\"\n          :download=\"`kare-pkg-backup-${Date.now()}.json`\"\n          :disabled=\"isNotExportable\"\n          >\n          export\n        </a>\n\n        <form>\n          <label for=\"file\"><a>import</a></label>\n          <input\n            @change=\"importFile\"\n            accept=\".json\"\n            hidden\n            id=\"file\"\n            multiple=\"false\"\n            title=\"Import backup (cmd + o)\"\n            type=\"file\"\n          >\n        </form>\n      </div>\n    </site-header>\n\n    <div class=\"gallery\">\n      <button\n        @click.prevent=\"newDrawing\"\n        class=\"thumbnail\"\n        id=\"newDrawing\"\n        >\n        +\n      </button>\n\n      <router-link\n        v-for=\"(drawing, idx) in drawings\"\n        :key=\"Math.random()\"\n        :to=\"getRoute(idx)\"\n        class=\"thumbnail\"\n        >\n        <div class=\"control-shade\"></div>\n\n        <preview :drawingIdx=\"idx\" :key=\"Math.random()\"></preview>\n      </router-link>\n    </div>\n  </div>\n</template>\n\n<script>\n  import DrawingBoard from './DrawingBoard.vue'\n  import Preview from './Preview.vue'\n  import SiteHeader from './SiteHeader.vue'\n\n  export default {\n    name: 'Home',\n\n    components: {\n      DrawingBoard: DrawingBoard,\n      Preview: Preview,\n      SiteHeader: SiteHeader\n    },\n\n    data() {\n      return {\n        drawings: this.$store.state.drawings\n      }\n    },\n\n    computed: {\n      isNotExportable() {\n        return this.$store.state.drawings.length === 0;\n      },\n\n      exportSrc() {\n        const drawings = this.$store.state.drawings;\n        const jsonExport = [];\n\n        for (let drawing of drawings) {\n          jsonExport.push(drawing.pixels);\n        }\n\n        const str = JSON.stringify(jsonExport);\n        return `data:application/json;charset=utf-8,${encodeURIComponent(str)}`;\n      }\n    },\n\n    methods: {\n      getRoute(idx) {\n        return `/edit/${idx}`;\n      },\n\n      newDrawing({target}) {\n        target.blur();\n        this.$store.commit('newDrawing');\n        this.$router.push('/edit/0');\n      },\n\n      importFile({target}) {\n        if (target.files.length === 0) return;\n\n        const fileReader = new FileReader();\n        fileReader.onload = ({target}) => {\n          this.$store.commit('importDrawings', {\n            importedPixels: JSON.parse(target.result)\n          });\n        };\n\n        fileReader.readAsText(target.files[0]);\n        target.parentElement.reset();\n      }\n    }\n  };\n</script>\n\n<style scoped>\n  .gallery {\n    display: flex;\n    flex-wrap: wrap;\n    padding: 1vw;\n  }\n\n  #newDrawing {\n    align-items: center;\n    background: black;\n    box-shadow: none;\n    border: 1px solid white;\n    border-radius: 5px;\n    color: white;\n    cursor: pointer;\n    display: flex;\n    font-size: 10vw;\n    justify-content: center;\n    padding-bottom: .75vw;\n    transition: border-color 100ms cubic-bezier(.4, 0, .2, 1),\n                color 100ms cubic-bezier(.4, 0, .2, 1);\n  }\n\n  #newDrawing:active,\n  #newDrawing:focus,\n  #newDrawing:hover {\n    border-color: #888;\n    color: #888;\n  }\n\n  .thumbnail {\n    flex-shrink: 0;\n    height: 17.6vw;\n    margin: 1vw;\n    position: relative;\n    width: 17.6vw;\n  }\n\n  .control-shade {\n    background: black;\n    height: 100%;\n    position: absolute;\n    opacity: 0;\n    transition: opacity 100ms cubic-bezier(.4, 0, .2, 1);\n    width: 100%;\n  }\n\n  .thumbnail:active > .control-shade,\n  .thumbnail:focus > .control-shade,\n  .thumbnail:hover  > .control-shade {\n    opacity: .4;\n  }\n\n  .preview {\n    height: 17.6vw;\n    width: 17.6vw;\n  }\n\n  form {\n    display: inline-block;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Home.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"home\"},[_c('site-header',[_c('div',[_c('a',{attrs:{\"title\":\"Export backup (cmd + s)\",\"href\":_vm.exportSrc,\"download\":(\"kare-pkg-backup-\" + (Date.now()) + \".json\"),\"disabled\":_vm.isNotExportable}},[_vm._v(\"\\n        export\\n      \")]),_vm._v(\" \"),_c('form',[_c('label',{attrs:{\"for\":\"file\"}},[_c('a',[_vm._v(\"import\")])]),_vm._v(\" \"),_c('input',{attrs:{\"accept\":\".json\",\"hidden\":\"\",\"id\":\"file\",\"multiple\":\"false\",\"title\":\"Import backup (cmd + o)\",\"type\":\"file\"},on:{\"change\":_vm.importFile}})])])]),_vm._v(\" \"),_c('div',{staticClass:\"gallery\"},[_c('button',{staticClass:\"thumbnail\",attrs:{\"id\":\"newDrawing\"},on:{\"click\":function($event){$event.preventDefault();return _vm.newDrawing($event)}}},[_vm._v(\"\\n      +\\n    \")]),_vm._v(\" \"),_vm._l((_vm.drawings),function(drawing,idx){return _c('router-link',{key:Math.random(),staticClass:\"thumbnail\",attrs:{\"to\":_vm.getRoute(idx)}},[_c('div',{staticClass:\"control-shade\"}),_vm._v(\" \"),_c('preview',{key:Math.random(),attrs:{\"drawingIdx\":idx}})],1)})],2)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-26a53f66\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Home.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-26a53f66\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Home.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Home.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-26a53f66\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-26a53f66\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Home.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\nimport Home from '@/components/Home'\nimport DrawingBoard from '@/components/DrawingBoard'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'Home',\n      component: Home\n    },\n\n    {\n      path: '/edit/:drawingIdx',\n      name: 'Edit',\n      component: DrawingBoard,\n      props: true\n    },\n\n    {\n      path: '*',\n      component: Home\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nexport default new Vuex.Store({\n  state: {\n    drawings: [\n      {\n        pixels: {\n          // strap top\n          205: true, 206: true, 207: true, 208: true, 209: true, 210: true,\n          237: true, 238: true, 239: true, 240: true, 241: true, 242: true,\n          269: true, 270: true, 271: true, 272: true, 273: true, 274: true,\n          301: true, 302: true, 303: true, 304: true, 305: true, 306: true,\n          // strap bottom\n          589: true, 590: true, 591: true, 592: true, 593: true, 594: true,\n          621: true, 622: true, 623: true, 624: true, 625: true, 626: true,\n          653: true, 654: true, 655: true, 656: true, 657: true, 658: true,\n          685: true, 686: true, 687: true, 688: true, 689: true, 690: true,\n          // face left\n          332: true, 363: true, 395: true, 427: true, 459: true, 491: true,\n          523: true, 556: true,\n          // face right\n          339: true, 372: true, 404: true, 436: true, 468: true, 500: true,\n          532: true, 563: true,\n          // crown\n          437: true, 469: true,\n          // hour\n          462: true, 463: true, 464: true,\n          // minute\n          368: true, 400: true, 432: true\n        },\n\n        imgSrc: '',\n\n        history: {\n          currIdx: -1,\n          actions: []\n        }\n      }\n    ]\n  },\n\n  mutations: {\n    newDrawing(state) {\n      unshiftDrawings(state, {});\n    },\n\n    importDrawings(state, {importedPixels}) {\n      const filteredPixels = importedPixels.filter((pixels) => {\n        return validatePixels(state, pixels);\n      });\n\n      for (let i = filteredPixels.length - 1; i >= 0; i--) {\n        unshiftDrawings(state, filteredPixels[i]);\n      }\n    },\n\n    startAction(state, {drawingIdx}) {\n      newAction(state, drawingIdx);\n    },\n\n    updateDrawing(state, {drawingIdx, pixelIdx, value}) {\n      setPixel(state, drawingIdx, pixelIdx, value);\n      recordToggledPixel(state, drawingIdx, pixelIdx);\n      updateLocalStorage(state);\n    },\n\n    undoDrawing(state, {drawingIdx}) {\n      const history = state.drawings[drawingIdx].history;\n      if (history.currIdx < 0) return;\n\n      replayAction(state, drawingIdx);\n      history.currIdx--;\n\n      updateLocalStorage(state);\n    },\n\n    redoDrawing(state, {drawingIdx}) {\n      const history = state.drawings[drawingIdx].history;\n      if (history.currIdx >= history.actions.length - 1) return;\n\n      history.currIdx++;\n      replayAction(state, drawingIdx);\n\n      updateLocalStorage(state);\n    },\n\n    clearDrawing(state, {drawingIdx}) {\n      newAction(state, drawingIdx);\n\n      const pixels = state.drawings[drawingIdx].pixels;\n      for (let pixelIdx in pixels) {\n        if (pixels[pixelIdx]) {\n          setPixel(state, drawingIdx, pixelIdx, false);\n          recordToggledPixel(state, drawingIdx, pixelIdx);\n        }\n      }\n\n      updateLocalStorage(state);\n    },\n\n    deleteDrawing(state, {drawingIdx}) {\n      this.state.drawings.splice(drawingIdx, 1);\n      updateLocalStorage(state);\n    },\n\n    updateImgSrc(state, {drawingIdx, imgSrc}) {\n      state.drawings[drawingIdx].imgSrc = imgSrc;\n    },\n\n    loadFromLocalStorage(state) {\n      if(localStorage['kare-pkg']) {\n        const localDrawings = JSON.parse(localStorage['kare-pkg']).drawings;\n        Vue.set(state, 'drawings', localDrawings);\n      } else {\n        localStorage.setItem('kare-pkg', JSON.stringify(state));\n      }\n    },\n  }\n})\n\nfunction unshiftDrawings(state, pixels) {\n  state.drawings.unshift({\n    pixels: pixels,\n    imgSrc: '',\n    history: {\n      currIdx: -1,\n      actions: []\n    }\n  });\n\n  updateLocalStorage(state);\n}\n\nfunction updateLocalStorage(state) {\n  localStorage.setItem('kare-pkg', JSON.stringify(state));\n}\n\nfunction validatePixels(state, pixels) {\n  const keys = Object.keys(pixels);\n  if (keys.length === 0) return false;\n\n  keys.forEach((key) => {\n    if (isNaN(key)) return false;\n    const keyNumber = parseFloat(key);\n    if (keyNumber !== parseInt(keyNumber)) return false;\n    if (keyNumber < 0 || keyNumber > 1023) return false;\n    if (typeof pixels[key] !== 'boolean') return false;\n  });\n  return true;\n}\n\nfunction newAction(state, drawingIdx) {\n  const history = state.drawings[drawingIdx].history;\n  const pruneCount = (history.actions.length - 1) - history.currIdx;\n  if (pruneCount > 0) {\n    history.actions.splice(history.currIdx + 1, pruneCount);\n  }\n  history.actions.push([]);\n  history.currIdx++;\n}\n\nfunction setPixel(state, drawingIdx, pixelIdx, value) {\n  const pixels = state.drawings[drawingIdx].pixels;\n  Vue.set(pixels, pixelIdx, value);\n}\n\nfunction recordToggledPixel(state, drawingIdx, pixelIdx) {\n  const drawing = state.drawings[drawingIdx];\n  const currAction = drawing.history.actions[drawing.history.currIdx];\n  currAction.push(pixelIdx);\n}\n\nfunction replayAction(state, drawingIdx) {\n  const drawing = state.drawings[drawingIdx];\n  const pixelsToToggle = drawing.history.actions[drawing.history.currIdx];\n  const currFill = drawing.pixels[pixelsToToggle[0]];\n  pixelsToToggle.forEach((pixelIdx) => {\n    setPixel(state, drawingIdx, pixelIdx, !currFill);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport App from './App'\nimport router from './router'\nimport store from './store'\nimport 'normalize.css'\n\nVue.config.productionTip = false\nVue.use(Vuex)\n\nrouter.beforeEach((to, from, next) => {\n  if (to.name === 'Edit') {\n    const drawingIdx = to.params.drawingIdx;\n    if (!store.state.drawings[drawingIdx]) {\n      next(from.path);\n      return;\n    }\n  }\n\n  next();\n});\n\nstore.commit('loadFromLocalStorage');\n\nnew Vue({\n  el: '#app',\n  components: {App},\n  template: '<App/>',\n  router,\n  store\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}