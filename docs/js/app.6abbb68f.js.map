{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/DrawingPreview.vue?d17b","webpack:///./src/components/DrawingEditor.vue?b583","webpack:///./src/App.vue?8986","webpack:///./src/components/AppHeader.vue?ebd9","webpack:///./src/views/Home.vue?bd55","webpack:///./src/views/Edit.vue?b8e3","webpack:///./src/App.vue","webpack:///./src/App.vue?dfb6","webpack:///./src/views/Home.vue","webpack:///./src/components/AppHeader.vue","webpack:///./src/components/AppHeader.vue?efcd","webpack:///./src/components/DrawingPreview.vue","webpack:///./src/components/DrawingPreview.vue?97f8","webpack:///./src/components/DrawingPreview.vue?59c3","webpack:///./src/views/Home.vue?d5e7","webpack:///./src/views/Home.vue?ab8c","webpack:///./src/views/Edit.vue","webpack:///./src/components/DrawingEditor.vue","webpack:///./src/components/DrawingEditor.vue?0919","webpack:///./src/components/DrawingEditor.vue?cc44","webpack:///./src/views/Edit.vue?0f8c","webpack:///./src/views/Edit.vue?3d8a","webpack:///./src/router/index.ts","webpack:///./src/store/drawing.ts","webpack:///./src/store/sample-drawings/watch.ts","webpack:///./src/store/index.ts","webpack:///./src/main.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Component","script","render","for","class","left","newDrawing","right","importDrawings","type","accept","multiple","id","hidden","href","exportUri","disabled","drawingsEmpty","download","Date","toLocaleString","deleteAllDrawings","drawings","dragOptions","item-key","item","index","to","routeForEdit","idx","props","Number","required","setup","store","preview","state","__scopeId","components","AppHeader","Draggable","DrawingPreview","router","direction","delay","animation","easing","chosenClass","ghostClass","set","newlySorted","commit","getters","uriForDrawingsExport","setTimeout","event","target","files","fileReader","FileReader","onload","file","export","readAsText","parentElement","reset","confirm","undo","undoDisabled","redo","redoDisabled","clear","clearDisabled","copyDrawing","downloadUri","deleteDrawing","drawingIdx","startStroke","continueStroke","data-pixel","stroke","undefined","pixel","getPixel","userAction","willFill","alreadyFilled","drawing","endStroke","isFilled","touch","changedTouches","document","elementFromPoint","clientX","clientY","dataset","pixelAsInt","parseInt","isNaN","addEventListener","removeEventListener","DrawingEditor","String","handleKeyboardShortcut","canUndo","canRedo","canClear","ctrlKey","metaKey","keyCode","shiftKey","preventDefault","routes","path","component","Home","Edit","history","options","Math","random","_preview","this","size","pixels","Set","canvas","add","strokes","currStroke","updatePreview","has","action","flip","record","Array","from","delete","remove","img","widthInPixels","pxPerPixel","domCanvas","createElement","domContext","getContext","canvasSize","height","width","fillStyle","fillRect","toDataURL","paint","color","col","row","floor","currUserAction","callback","topStrap","bottomStrap","leftFace","rightFace","googleyEyes","hourHand","minuteHand","crown","watch","encodeURIComponent","JSON","stringify","map","mutations","update","original","copy","unshift","saveToLocalStorage","drawingExports","localStorage","setItem","loadFromLocalStorage","parse","drawingExport","loadFromExport","toString","setDrawings","oncontextmenu","onbeforeunload","App","use","mount"],"mappings":"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","file":"js/app.6abbb68f.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/kare-pkg/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DrawingPreview.vue?vue&type=style&index=0&id=4cd58bb7&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DrawingEditor.vue?vue&type=style&index=0&id=2a9b59b5&lang=scss&scoped=true\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./App.vue?vue&type=style&index=0&id=40b752e8&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AppHeader.vue?vue&type=style&index=0&id=28cbfec4&lang=scss\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Home.vue?vue&type=style&index=0&id=0a8fd215&lang=scss&scoped=true\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Edit.vue?vue&type=style&index=0&id=41f97858&lang=scss&scoped=true\"","<template>\n  <router-view v-slot=\"{ Component }\">\n    <transition name=\"fade\" mode=\"out-in\">\n      <component :is=\"Component\" />\n    </transition>\n  </router-view>\n</template>\n\n<style lang=\"scss\">\n* {\n  box-sizing: border-box;\n  -webkit-tap-highlight-color: transparent;\n  user-select: none;\n}\n\nhtml {\n  padding: 1vw 1vw 4vw 1vw;\n  background: #000;\n  color: #fff;\n  font-family: \"Andale Mono\", \"Lucida Console\", monospace;\n  font-size: 15px;\n}\n\na {\n  display: block;\n  color: #fff;\n  outline: none;\n  text-decoration: none;\n  cursor: pointer;\n\n  &[disabled=\"true\"] {\n    pointer-events: none;\n    opacity: 0.5;\n  }\n}\n\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n  transform: scale(0.95);\n}\n\n// TODO: Fine-tune these animation timings.\n.fade-enter-active {\n  transition: all 175ms cubic-bezier(0, 0, 0.2, 1);\n}\n\n.fade-leave-active {\n  transition: all 125ms cubic-bezier(0.4, 0, 1, 1);\n}\n</style>\n","import { render } from \"./App.vue?vue&type=template&id=40b752e8\"\nconst script = {}\n\nimport \"./App.vue?vue&type=style&index=0&id=40b752e8&lang=scss\"\nscript.render = render\n\nexport default script","<template>\n  <div>\n    <app-header>\n      <template v-slot:left>\n        <a @click.prevent=\"newDrawing\">+ NEW</a>\n      </template>\n      <template v-slot:right>\n        <form>\n          <label for=\"import\">\n            <a>import</a>\n          </label>\n          <input\n            @change=\"importDrawings\"\n            type=\"file\"\n            accept=\".json\"\n            multiple=\"false\"\n            id=\"import\"\n            hidden\n          />\n        </form>\n        <a\n          :href=\"exportUri\"\n          :disabled=\"drawingsEmpty\"\n          :download=\"`kare.pkg-export-${new Date().toLocaleString()}.json`\"\n          >export</a\n        >\n        <a @click=\"deleteAllDrawings\" :disabled=\"drawingsEmpty\">delete all</a>\n      </template>\n    </app-header>\n\n    <main class=\"thumbnail-grid\">\n      <draggable v-model=\"drawings\" v-bind=\"dragOptions\" item-key=\"id\">\n        <template #item=\"{ index }\">\n          <router-link class=\"thumbnail-wrapper\" :to=\"routeForEdit(index)\">\n            <drawing-preview class=\"thumbnail\" :idx=\"index\" />\n          </router-link>\n        </template>\n      </draggable>\n    </main>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nimport Draggable from \"vuedraggable\";\n\nimport { Drawing } from \"../store/drawing\";\nimport AppHeader from \"../components/AppHeader.vue\";\nimport DrawingPreview from \"../components/DrawingPreview.vue\";\n\nexport default defineComponent({\n  components: {\n    AppHeader,\n    Draggable,\n    DrawingPreview,\n  },\n\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n\n    const dragOptions = ref({\n      direction: \"horizontal\",\n      delay: 250,\n      animation: 200,\n      easing: \"cubic-bezier(0.4, 0, 0.2, 1)\",\n      chosenClass: \"drag-chosen\",\n      ghostClass: \"drag-ghost\",\n    });\n\n    const drawings = computed({\n      get() {\n        return store.state.drawings;\n      },\n      set(newlySorted: Drawing[]) {\n        store.commit(\"setDrawings\", newlySorted);\n      },\n    });\n\n    const drawingsEmpty = computed(() => store.state.drawings.length === 0);\n\n    const exportUri = computed(() => store.getters.uriForDrawingsExport);\n\n    function routeForEdit(idx: number): string {\n      return `/edit/${idx}`;\n    }\n\n    function newDrawing(): void {\n      setTimeout(() => store.commit(\"newDrawing\"));\n      router.push(routeForEdit(0));\n    }\n\n    function importDrawings(event: InputEvent): void {\n      const target = event.target as HTMLInputElement;\n      if (!target || !target.files || target.files.length === 0) return;\n\n      const fileReader = new FileReader();\n      fileReader.onload = (event: Event) => {\n        const file = (event.target as FileReader).result;\n        if (!file) return;\n        store.commit(\"loadFromExport\", {\n          export: file,\n        });\n      };\n\n      fileReader.readAsText(target.files[0]);\n      (target.parentElement as HTMLFormElement).reset();\n    }\n\n    function deleteAllDrawings(): void {\n      if (window.confirm(`This cannot be undone. Are you sure?`)) {\n        store.commit(\"deleteAllDrawings\");\n      }\n    }\n\n    return {\n      dragOptions,\n      drawings,\n      drawingsEmpty,\n      exportUri,\n      routeForEdit,\n      newDrawing,\n      importDrawings,\n      deleteAllDrawings,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.thumbnail-grid {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.thumbnail-wrapper {\n  cursor: pointer;\n  display: inline-block;\n  margin: 0 1vw 2vw 1vw;\n}\n\n.thumbnail {\n  height: 22.5vw;\n  width: 22.5vw;\n\n  @media (min-width: 769px) {\n    height: 17.6vw;\n    width: 17.6vw;\n  }\n\n  @media (min-width: 1025px) {\n    height: 14.3333333333vw;\n    width: 14.3333333333vw;\n  }\n}\n\n.drag-chosen {\n  opacity: 0.9;\n  transform: scale(1.05, 1.05);\n}\n\n.drag-ghost {\n  opacity: 0;\n}\n</style>\n","<template>\n  <header class=\"app-header\">\n    <div class=\"left\">\n      <slot name=\"left\" />\n    </div>\n    <div class=\"right\">\n      <slot name=\"right\" />\n    </div>\n  </header>\n</template>\n\n<style lang=\"scss\">\n.app-header {\n  display: flex;\n  padding: 0 0.25vw 2vmax 0.25vw;\n\n  .left {\n    flex-shrink: 0;\n    letter-spacing: 0.05rem;\n  }\n\n  .right {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: flex-end;\n    margin-left: auto;\n\n    a {\n      margin-left: 1.5rem;\n    }\n  }\n\n  a {\n    margin: 0.25vmax 0;\n    padding: 0.75vmax;\n  }\n}\n</style>\n","import { render } from \"./AppHeader.vue?vue&type=template&id=28cbfec4\"\nconst script = {}\n\nimport \"./AppHeader.vue?vue&type=style&index=0&id=28cbfec4&lang=scss\"\nscript.render = render\n\nexport default script","<template>\n  <img :src=\"preview\" />\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent } from \"vue\";\nimport { useStore } from \"vuex\";\n\nexport default defineComponent({\n  props: {\n    idx: {\n      type: Number,\n      required: true,\n    },\n  },\n\n  setup(props) {\n    const store = useStore();\n\n    return {\n      preview: computed(() => store.state.drawings[props.idx].preview),\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\nimg {\n  border: 1px solid #fff;\n}\n</style>\n","\nimport { computed, defineComponent } from \"vue\";\nimport { useStore } from \"vuex\";\n\nexport default defineComponent({\n  props: {\n    idx: {\n      type: Number,\n      required: true,\n    },\n  },\n\n  setup(props) {\n    const store = useStore();\n\n    return {\n      preview: computed(() => store.state.drawings[props.idx].preview),\n    };\n  },\n});\n","import { render } from \"./DrawingPreview.vue?vue&type=template&id=4cd58bb7&scoped=true\"\nimport script from \"./DrawingPreview.vue?vue&type=script&lang=ts\"\nexport * from \"./DrawingPreview.vue?vue&type=script&lang=ts\"\n\nimport \"./DrawingPreview.vue?vue&type=style&index=0&id=4cd58bb7&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-4cd58bb7\"\n\nexport default script","\nimport { computed, defineComponent, ref } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\nimport Draggable from \"vuedraggable\";\n\nimport { Drawing } from \"../store/drawing\";\nimport AppHeader from \"../components/AppHeader.vue\";\nimport DrawingPreview from \"../components/DrawingPreview.vue\";\n\nexport default defineComponent({\n  components: {\n    AppHeader,\n    Draggable,\n    DrawingPreview,\n  },\n\n  setup() {\n    const store = useStore();\n    const router = useRouter();\n\n    const dragOptions = ref({\n      direction: \"horizontal\",\n      delay: 250,\n      animation: 200,\n      easing: \"cubic-bezier(0.4, 0, 0.2, 1)\",\n      chosenClass: \"drag-chosen\",\n      ghostClass: \"drag-ghost\",\n    });\n\n    const drawings = computed({\n      get() {\n        return store.state.drawings;\n      },\n      set(newlySorted: Drawing[]) {\n        store.commit(\"setDrawings\", newlySorted);\n      },\n    });\n\n    const drawingsEmpty = computed(() => store.state.drawings.length === 0);\n\n    const exportUri = computed(() => store.getters.uriForDrawingsExport);\n\n    function routeForEdit(idx: number): string {\n      return `/edit/${idx}`;\n    }\n\n    function newDrawing(): void {\n      setTimeout(() => store.commit(\"newDrawing\"));\n      router.push(routeForEdit(0));\n    }\n\n    function importDrawings(event: InputEvent): void {\n      const target = event.target as HTMLInputElement;\n      if (!target || !target.files || target.files.length === 0) return;\n\n      const fileReader = new FileReader();\n      fileReader.onload = (event: Event) => {\n        const file = (event.target as FileReader).result;\n        if (!file) return;\n        store.commit(\"loadFromExport\", {\n          export: file,\n        });\n      };\n\n      fileReader.readAsText(target.files[0]);\n      (target.parentElement as HTMLFormElement).reset();\n    }\n\n    function deleteAllDrawings(): void {\n      if (window.confirm(`This cannot be undone. Are you sure?`)) {\n        store.commit(\"deleteAllDrawings\");\n      }\n    }\n\n    return {\n      dragOptions,\n      drawings,\n      drawingsEmpty,\n      exportUri,\n      routeForEdit,\n      newDrawing,\n      importDrawings,\n      deleteAllDrawings,\n    };\n  },\n});\n","import { render } from \"./Home.vue?vue&type=template&id=0a8fd215&scoped=true\"\nimport script from \"./Home.vue?vue&type=script&lang=ts\"\nexport * from \"./Home.vue?vue&type=script&lang=ts\"\n\nimport \"./Home.vue?vue&type=style&index=0&id=0a8fd215&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-0a8fd215\"\n\nexport default script","<template>\n  <div>\n    <app-header>\n      <template v-slot:left>\n        <router-link to=\"/\">&lt; BACK</router-link>\n      </template>\n      <template v-slot:right>\n        <a @click=\"undo\" :disabled=\"undoDisabled\">undo</a>\n        <a @click=\"redo\" :disabled=\"redoDisabled\">redo</a>\n        <a @click=\"clear\" :disabled=\"clearDisabled\">clear</a>\n        <a @click=\"copyDrawing\">make copy</a>\n        <a\n          :href=\"downloadUri\"\n          :download=\"`kare.pkg-drawing-${new Date().toLocaleString()}.png`\"\n          >download</a\n        >\n        <a @click=\"deleteDrawing\">delete</a>\n      </template>\n    </app-header>\n\n    <main>\n      <drawing-preview class=\"preview\" :idx=\"drawingIdx\" />\n      <drawing-editor class=\"editor\" :idx=\"drawingIdx\" />\n    </main>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, onMounted, onUnmounted } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\n\nimport AppHeader from \"../components/AppHeader.vue\";\nimport DrawingEditor from \"../components/DrawingEditor.vue\";\nimport DrawingPreview from \"../components/DrawingPreview.vue\";\n\nexport default defineComponent({\n  components: {\n    AppHeader,\n    DrawingEditor,\n    DrawingPreview,\n  },\n\n  props: {\n    idx: {\n      type: String,\n      required: true,\n    },\n  },\n\n  setup(props) {\n    onMounted(() =>\n      window.addEventListener(\"keydown\", (event) =>\n        handleKeyboardShortcut(event)\n      )\n    );\n\n    onUnmounted(() =>\n      window.removeEventListener(\"keydown\", (event) =>\n        handleKeyboardShortcut(event)\n      )\n    );\n\n    const store = useStore();\n    const router = useRouter();\n\n    const drawingIdx = parseInt(props.idx);\n    const drawing = store.state.drawings[drawingIdx];\n    const downloadUri = computed(() => drawing.preview);\n    const undoDisabled = computed(() => !drawing.canUndo);\n    const redoDisabled = computed(() => !drawing.canRedo);\n    const clearDisabled = computed(() => !drawing.canClear);\n\n    function undo(): void {\n      store.commit(\"undo\", { drawing: drawingIdx });\n    }\n\n    function redo(): void {\n      store.commit(\"redo\", { drawing: drawingIdx });\n    }\n\n    function clear(): void {\n      store.commit(\"clear\", { drawing: drawingIdx });\n    }\n\n    function copyDrawing(): void {\n      setTimeout(() => store.commit(\"copyDrawing\", { drawing: drawingIdx }));\n      router.push(\"/\");\n      setTimeout(() => router.push(\"/edit/0\"));\n    }\n\n    function deleteDrawing(): void {\n      if (window.confirm(`This cannot be undone. Are you sure?`)) {\n        setTimeout(() =>\n          store.commit(\"deleteDrawing\", { drawing: drawingIdx })\n        );\n        router.push(\"/\");\n      }\n    }\n\n    function handleKeyboardShortcut(event: KeyboardEvent): void {\n      if (!event.ctrlKey && !event.metaKey) return;\n      if (event.keyCode !== 90) return;\n      if (event.shiftKey) {\n        redo();\n      } else {\n        undo();\n      }\n      event.preventDefault();\n    }\n\n    return {\n      drawingIdx,\n      downloadUri,\n      undoDisabled,\n      redoDisabled,\n      clearDisabled,\n      undo,\n      redo,\n      clear,\n      copyDrawing,\n      deleteDrawing,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\nmain {\n  display: flex;\n  justify-content: center;\n}\n\n.preview {\n  height: 17vmin;\n  width: 17vmin;\n  margin-left: -6vmin;\n  margin-right: 3vmin;\n  flex-shrink: 0;\n}\n\n.editor {\n  height: 74vmin;\n  width: 74vmin;\n  flex-shrink: 0;\n}\n</style>\n","<template>\n  <div\n    class=\"wrapper\"\n    @mousedown.prevent=\"startStroke\"\n    @touchstart.prevent=\"startStroke\"\n    @mouseover.prevent=\"continueStroke\"\n    @touchmove.prevent=\"continueStroke\"\n  >\n    <!-- TODO: Pull size from Drawing instead of hardcoding 32 * 32. -->\n    <table class=\"edit-layer\">\n      <tr v-for=\"i in 32\" :key=\"i\">\n        <td v-for=\"j in 32\" :key=\"j\" :data-pixel=\"32 * (i - 1) + (j - 1)\" />\n      </tr>\n    </table>\n\n    <drawing-preview class=\"preview-layer\" :idx=\"idx\" />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, onUnmounted } from \"vue\";\nimport { useStore } from \"vuex\";\n\nimport DrawingPreview from \"./DrawingPreview.vue\";\n\ninterface Stroke {\n  userAction: Event;\n  willFill: boolean;\n}\n\nexport default defineComponent({\n  components: {\n    DrawingPreview,\n  },\n\n  props: {\n    idx: {\n      type: Number,\n      required: true,\n    },\n  },\n\n  setup(props) {\n    const store = useStore();\n\n    let stroke: Stroke | undefined = undefined;\n\n    onMounted(() => {\n      window.addEventListener(\"mouseup\", endStroke);\n      window.addEventListener(\"touchcancel\", endStroke);\n      window.addEventListener(\"touchend\", endStroke);\n    });\n\n    onUnmounted(() => {\n      window.removeEventListener(\"mouseup\", endStroke);\n      window.removeEventListener(\"touchcancel\", endStroke);\n      window.removeEventListener(\"touchend\", endStroke);\n    });\n\n    function startStroke(event: Event): void {\n      const pixel = getPixel(event);\n      if (pixel === null) return;\n\n      stroke = {\n        userAction: event,\n        willFill: !alreadyFilled(pixel),\n      };\n\n      store.commit(\"flip\", {\n        drawing: props.idx,\n        pixel,\n        event,\n      });\n    }\n\n    function continueStroke(event: Event): void {\n      if (stroke === undefined) return;\n      const pixel = getPixel(event);\n      if (pixel === null) return;\n      if (stroke.willFill === alreadyFilled(pixel)) return;\n\n      store.commit(\"flip\", {\n        drawing: props.idx,\n        pixel,\n        event: stroke.userAction,\n      });\n    }\n\n    function endStroke(): void {\n      stroke = undefined;\n    }\n\n    function alreadyFilled(pixel: number) {\n      return store.state.drawings[props.idx].isFilled(pixel);\n    }\n\n    function getPixel(event: Event): number | null {\n      let target;\n      if (event.type === \"touchmove\") {\n        const touch = (event as TouchEvent).changedTouches[0];\n        target = document.elementFromPoint(touch.clientX, touch.clientY);\n      } else {\n        target = event.target;\n      }\n\n      const pixel = (target as HTMLElement).dataset.pixel;\n      if (pixel === undefined) return null;\n\n      const pixelAsInt = parseInt(pixel);\n      return isNaN(pixelAsInt) ? null : pixelAsInt;\n    }\n\n    return {\n      startStroke,\n      continueStroke,\n    };\n  },\n});\n</script>\n\n<style lang=\"scss\" scoped>\n.wrapper {\n  position: relative;\n  background: #fff;\n}\n\n.edit-layer {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  border-collapse: collapse;\n  cursor: pointer;\n  z-index: 100;\n\n  td {\n    border: 1px solid #aaa;\n  }\n}\n\n.preview-layer {\n  position: absolute;\n  height: 100%;\n  width: 100%;\n  z-index: 99;\n}\n</style>\n","\nimport { defineComponent, onMounted, onUnmounted } from \"vue\";\nimport { useStore } from \"vuex\";\n\nimport DrawingPreview from \"./DrawingPreview.vue\";\n\ninterface Stroke {\n  userAction: Event;\n  willFill: boolean;\n}\n\nexport default defineComponent({\n  components: {\n    DrawingPreview,\n  },\n\n  props: {\n    idx: {\n      type: Number,\n      required: true,\n    },\n  },\n\n  setup(props) {\n    const store = useStore();\n\n    let stroke: Stroke | undefined = undefined;\n\n    onMounted(() => {\n      window.addEventListener(\"mouseup\", endStroke);\n      window.addEventListener(\"touchcancel\", endStroke);\n      window.addEventListener(\"touchend\", endStroke);\n    });\n\n    onUnmounted(() => {\n      window.removeEventListener(\"mouseup\", endStroke);\n      window.removeEventListener(\"touchcancel\", endStroke);\n      window.removeEventListener(\"touchend\", endStroke);\n    });\n\n    function startStroke(event: Event): void {\n      const pixel = getPixel(event);\n      if (pixel === null) return;\n\n      stroke = {\n        userAction: event,\n        willFill: !alreadyFilled(pixel),\n      };\n\n      store.commit(\"flip\", {\n        drawing: props.idx,\n        pixel,\n        event,\n      });\n    }\n\n    function continueStroke(event: Event): void {\n      if (stroke === undefined) return;\n      const pixel = getPixel(event);\n      if (pixel === null) return;\n      if (stroke.willFill === alreadyFilled(pixel)) return;\n\n      store.commit(\"flip\", {\n        drawing: props.idx,\n        pixel,\n        event: stroke.userAction,\n      });\n    }\n\n    function endStroke(): void {\n      stroke = undefined;\n    }\n\n    function alreadyFilled(pixel: number) {\n      return store.state.drawings[props.idx].isFilled(pixel);\n    }\n\n    function getPixel(event: Event): number | null {\n      let target;\n      if (event.type === \"touchmove\") {\n        const touch = (event as TouchEvent).changedTouches[0];\n        target = document.elementFromPoint(touch.clientX, touch.clientY);\n      } else {\n        target = event.target;\n      }\n\n      const pixel = (target as HTMLElement).dataset.pixel;\n      if (pixel === undefined) return null;\n\n      const pixelAsInt = parseInt(pixel);\n      return isNaN(pixelAsInt) ? null : pixelAsInt;\n    }\n\n    return {\n      startStroke,\n      continueStroke,\n    };\n  },\n});\n","import { render } from \"./DrawingEditor.vue?vue&type=template&id=2a9b59b5&scoped=true\"\nimport script from \"./DrawingEditor.vue?vue&type=script&lang=ts\"\nexport * from \"./DrawingEditor.vue?vue&type=script&lang=ts\"\n\nimport \"./DrawingEditor.vue?vue&type=style&index=0&id=2a9b59b5&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2a9b59b5\"\n\nexport default script","\nimport { computed, defineComponent, onMounted, onUnmounted } from \"vue\";\nimport { useStore } from \"vuex\";\nimport { useRouter } from \"vue-router\";\n\nimport AppHeader from \"../components/AppHeader.vue\";\nimport DrawingEditor from \"../components/DrawingEditor.vue\";\nimport DrawingPreview from \"../components/DrawingPreview.vue\";\n\nexport default defineComponent({\n  components: {\n    AppHeader,\n    DrawingEditor,\n    DrawingPreview,\n  },\n\n  props: {\n    idx: {\n      type: String,\n      required: true,\n    },\n  },\n\n  setup(props) {\n    onMounted(() =>\n      window.addEventListener(\"keydown\", (event) =>\n        handleKeyboardShortcut(event)\n      )\n    );\n\n    onUnmounted(() =>\n      window.removeEventListener(\"keydown\", (event) =>\n        handleKeyboardShortcut(event)\n      )\n    );\n\n    const store = useStore();\n    const router = useRouter();\n\n    const drawingIdx = parseInt(props.idx);\n    const drawing = store.state.drawings[drawingIdx];\n    const downloadUri = computed(() => drawing.preview);\n    const undoDisabled = computed(() => !drawing.canUndo);\n    const redoDisabled = computed(() => !drawing.canRedo);\n    const clearDisabled = computed(() => !drawing.canClear);\n\n    function undo(): void {\n      store.commit(\"undo\", { drawing: drawingIdx });\n    }\n\n    function redo(): void {\n      store.commit(\"redo\", { drawing: drawingIdx });\n    }\n\n    function clear(): void {\n      store.commit(\"clear\", { drawing: drawingIdx });\n    }\n\n    function copyDrawing(): void {\n      setTimeout(() => store.commit(\"copyDrawing\", { drawing: drawingIdx }));\n      router.push(\"/\");\n      setTimeout(() => router.push(\"/edit/0\"));\n    }\n\n    function deleteDrawing(): void {\n      if (window.confirm(`This cannot be undone. Are you sure?`)) {\n        setTimeout(() =>\n          store.commit(\"deleteDrawing\", { drawing: drawingIdx })\n        );\n        router.push(\"/\");\n      }\n    }\n\n    function handleKeyboardShortcut(event: KeyboardEvent): void {\n      if (!event.ctrlKey && !event.metaKey) return;\n      if (event.keyCode !== 90) return;\n      if (event.shiftKey) {\n        redo();\n      } else {\n        undo();\n      }\n      event.preventDefault();\n    }\n\n    return {\n      drawingIdx,\n      downloadUri,\n      undoDisabled,\n      redoDisabled,\n      clearDisabled,\n      undo,\n      redo,\n      clear,\n      copyDrawing,\n      deleteDrawing,\n    };\n  },\n});\n","import { render } from \"./Edit.vue?vue&type=template&id=41f97858&scoped=true\"\nimport script from \"./Edit.vue?vue&type=script&lang=ts\"\nexport * from \"./Edit.vue?vue&type=script&lang=ts\"\n\nimport \"./Edit.vue?vue&type=style&index=0&id=41f97858&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-41f97858\"\n\nexport default script","import { createRouter, createWebHistory, RouteRecordRaw } from \"vue-router\";\n\nimport Home from \"../views/Home.vue\";\nimport Edit from \"../views/Edit.vue\";\n\nconst routes: Array<RouteRecordRaw> = [\n  {\n    path: \"/\",\n    component: Home,\n  },\n  {\n    path: \"/edit/:idx\",\n    component: Edit,\n    props: true,\n  },\n  {\n    path: \"/:pathMatch(.*)*\",\n    name: \"404\",\n    component: Home,\n  },\n];\n\nexport default createRouter({\n  history: createWebHistory(process.env.BASE_URL),\n  routes,\n});\n","type UserAction = Event | null;\n\nexport interface DrawingExport {\n  pixels: number[];\n  history?: HistoryExport;\n}\n\ninterface HistoryExport {\n  strokes: number[][];\n  currStroke: number;\n}\n\nexport class Drawing {\n  readonly id: number = Math.random();\n\n  private readonly size: number;\n\n  private readonly pixels: Set<number>;\n\n  private readonly canvas: Canvas;\n\n  private readonly history: History;\n\n  private _preview = \"\";\n\n  constructor(options?: { size?: number; data?: DrawingExport }) {\n    this.size = options?.size ?? 32;\n\n    this.pixels = options?.data ? new Set(options.data.pixels) : new Set();\n\n    this.canvas = new Canvas(this.size);\n    for (const pixel of this.pixels) {\n      this.canvas.add(pixel);\n    }\n\n    this.history = options?.data?.history\n      ? new History({\n          data: {\n            strokes: options.data.history.strokes,\n            currStroke: options.data.history.currStroke,\n          },\n        })\n      : new History();\n\n    this.updatePreview();\n  }\n\n  get preview(): string {\n    return this._preview;\n  }\n\n  get canUndo(): boolean {\n    return this.history.canUndo;\n  }\n\n  get canRedo(): boolean {\n    return this.history.canRedo;\n  }\n\n  get canClear(): boolean {\n    return this.pixels.size > 0;\n  }\n\n  isFilled(pixel: number): boolean {\n    return this.pixels.has(pixel);\n  }\n\n  update(pixel: number, action: UserAction): void {\n    if (pixel < 0 || pixel >= this.size * this.size) return;\n    this.flip(pixel);\n    this.history.record(pixel, action);\n    this.updatePreview();\n  }\n\n  clear(): void {\n    for (const pixel of this.pixels) {\n      this.flip(pixel);\n      this.history.record(pixel, null);\n    }\n    this.updatePreview();\n  }\n\n  undo(): void {\n    this.history.undo((pixel) => this.flip(pixel));\n    this.updatePreview();\n  }\n\n  redo(): void {\n    this.history.redo((pixel) => this.flip(pixel));\n    this.updatePreview();\n  }\n\n  export(): DrawingExport {\n    return {\n      pixels: Array.from(this.pixels),\n      history: this.history.export(),\n    };\n  }\n\n  private flip(pixel: number): void {\n    if (this.pixels.delete(pixel)) {\n      this.canvas.remove(pixel);\n    } else {\n      this.pixels.add(pixel);\n      this.canvas.add(pixel);\n    }\n  }\n\n  private updatePreview() {\n    this._preview = this.canvas.img;\n  }\n}\n\nclass Canvas {\n  private readonly domCanvas: HTMLCanvasElement =\n    document.createElement(\"canvas\");\n\n  private readonly domContext: CanvasRenderingContext2D =\n    this.domCanvas.getContext(\"2d\") as CanvasRenderingContext2D;\n\n  constructor(\n    private readonly widthInPixels: number,\n    private readonly pxPerPixel = 20\n  ) {\n    const canvasSize = this.widthInPixels * this.pxPerPixel;\n    this.domCanvas.height = canvasSize;\n    this.domCanvas.width = canvasSize;\n    this.domContext.fillStyle = \"#fff\";\n    this.domContext.fillRect(0, 0, canvasSize, canvasSize);\n  }\n\n  get img() {\n    return this.domCanvas.toDataURL(\"image/png\");\n  }\n\n  add(pixel: number): void {\n    this.paint(pixel, \"#000\");\n  }\n\n  remove(pixel: number): void {\n    this.paint(pixel, \"#fff\");\n  }\n\n  private paint(pixel: number, color: \"#000\" | \"#fff\"): void {\n    const col = pixel % this.widthInPixels;\n    const row = Math.floor(pixel / this.widthInPixels);\n    this.domContext.fillStyle = color;\n    this.domContext.fillRect(\n      col * this.pxPerPixel,\n      row * this.pxPerPixel,\n      this.pxPerPixel,\n      this.pxPerPixel\n    );\n  }\n}\n\nclass History {\n  private strokes: number[][];\n\n  private currStroke: number;\n\n  private currUserAction?: UserAction = undefined;\n\n  constructor(options?: { data?: HistoryExport }) {\n    this.strokes = options?.data?.strokes ?? [];\n    this.currStroke = options?.data?.currStroke ?? -1;\n  }\n\n  get canUndo(): boolean {\n    return this.currStroke >= 0;\n  }\n\n  get canRedo(): boolean {\n    return this.currStroke < this.strokes.length - 1;\n  }\n\n  undo(callback: (pixel: number) => void): void {\n    if (!this.canUndo) return;\n    for (const pixel of this.strokes[this.currStroke]) {\n      callback(pixel);\n    }\n    this.currStroke--;\n  }\n\n  redo(callback: (pixel: number) => void): void {\n    if (!this.canRedo) return;\n    this.currStroke++;\n    for (const pixel of this.strokes[this.currStroke]) {\n      callback(pixel);\n    }\n  }\n\n  record(pixel: number, action: UserAction): void {\n    if (action === this.currUserAction) {\n      this.strokes[this.currStroke].push(pixel);\n    } else {\n      this.currUserAction = action;\n      this.currStroke++;\n      this.strokes[this.currStroke] = [pixel];\n    }\n\n    if (this.strokes.length > this.currStroke + 1) {\n      this.strokes = this.strokes.slice(0, this.currStroke + 1);\n    }\n  }\n\n  export(): HistoryExport {\n    return {\n      strokes: this.strokes,\n      currStroke: this.currStroke,\n    };\n  }\n}\n","const topStrap = [\n  205, 206, 207, 208, 209, 210, 237, 238, 239, 240, 241, 242, 269, 270, 271,\n  272, 273, 274, 301, 302, 303, 304, 305, 306,\n];\nconst bottomStrap = [\n  589, 590, 591, 592, 593, 594, 621, 622, 623, 624, 625, 626, 653, 654, 655,\n  656, 657, 658, 685, 686, 687, 688, 689, 690,\n];\nconst leftFace = [332, 363, 395, 427, 459, 491, 523, 556];\nconst rightFace = [339, 372, 404, 436, 468, 500, 532, 563];\nconst googleyEyes = [397, 434];\nconst hourHand = [462, 463, 464];\nconst minuteHand = [368, 400, 432];\nconst crown = [437, 469];\n\nexport const watch = {\n  pixels: [\n    ...topStrap,\n    ...bottomStrap,\n    ...leftFace,\n    ...rightFace,\n    ...googleyEyes,\n    ...hourHand,\n    ...minuteHand,\n    ...crown,\n  ],\n};\n","import { createStore } from \"vuex\";\n\nimport { Drawing, DrawingExport } from \"./drawing\";\nimport { watch } from \"./sample-drawings/watch\";\n\ninterface State {\n  drawings: Drawing[];\n}\n\nexport default createStore({\n  state: {\n    drawings: [new Drawing({ data: watch })],\n  },\n\n  getters: {\n    uriForDrawingsExport: (state: State) => {\n      return `data:application/json;charset=utf-8,${encodeURIComponent(\n        JSON.stringify(state.drawings.map((drawing) => drawing.export()))\n      )}\n      `;\n    },\n  },\n\n  mutations: {\n    flip(\n      state: State,\n      options: { drawing: number; pixel: number; event: Event }\n    ): void {\n      state.drawings[options.drawing].update(options.pixel, options.event);\n    },\n\n    undo(state: State, options: { drawing: number }): void {\n      state.drawings[options.drawing].undo();\n    },\n\n    redo(state: State, options: { drawing: number }): void {\n      state.drawings[options.drawing].redo();\n    },\n\n    clear(state: State, options: { drawing: number }): void {\n      state.drawings[options.drawing].clear();\n    },\n\n    copyDrawing(state: State, options: { drawing: number }): void {\n      const original = state.drawings[options.drawing].export();\n      const copy = new Drawing({ data: original });\n      state.drawings.unshift(copy);\n    },\n\n    newDrawing(state: State): void {\n      state.drawings.unshift(new Drawing());\n    },\n\n    deleteDrawing(state: State, options: { drawing: number }): void {\n      state.drawings.splice(options.drawing, 1);\n    },\n\n    deleteAllDrawings(state: State): void {\n      state.drawings.splice(0, state.drawings.length);\n    },\n\n    saveToLocalStorage(state: State): void {\n      const drawingExports = state.drawings.map((drawing) => drawing.export());\n      localStorage.setItem(\"kare-pkg\", JSON.stringify(drawingExports));\n    },\n\n    loadFromLocalStorage(state: State): void {\n      if (!localStorage[\"kare-pkg\"]) return;\n      const drawingExports = JSON.parse(localStorage[\"kare-pkg\"]);\n      state.drawings = drawingExports.map(\n        (drawingExport: DrawingExport) => new Drawing({ data: drawingExport })\n      );\n    },\n\n    loadFromExport(state, options: { export: File }): void {\n      const drawingExports = JSON.parse(options.export.toString());\n      for (let i = drawingExports.length - 1; i >= 0; i--) {\n        try {\n          state.drawings.unshift(new Drawing({ data: drawingExports[i] }));\n        } catch {\n          /* no-op */\n        }\n      }\n    },\n\n    setDrawings(state, drawings: Drawing[]): void {\n      state.drawings = drawings;\n    },\n  },\n});\n","import \"normalize.css\";\nimport { createApp } from \"vue\";\n\nimport App from \"./App.vue\";\nimport router from \"./router\";\nimport store from \"./store\";\n\nwindow.oncontextmenu = (event: Event) => event.preventDefault();\nwindow.onbeforeunload = () => store.commit(\"saveToLocalStorage\");\n\nstore.commit(\"loadFromLocalStorage\");\ncreateApp(App).use(store).use(router).mount(\"#app\");\n"],"sourceRoot":""}